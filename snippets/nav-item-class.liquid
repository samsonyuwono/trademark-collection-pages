{% assign current = false %}
{% assign item_class = 'nav-item' %}

{% if template == 'index' and link.url == '/' %}
  {% assign current = true %}
{% elsif collection.url == link.url %}
  {% assign current = true %}
{% elsif blog.url == link.url %}
  {% assign current = true %}
{% elsif page.url == link.url %}
  {% assign current = true %}
{% elsif page_title == link.title %}
  {% assign current = true %}
{% elsif template == 'list-collections' and link.url == '/collections' %}
  {% assign current = true %}
{% elsif page_title == 'Products' and link.url == '/collections/all' %}
  {% assign current = true %}
{% elsif template == 'article' and link.url == article.url %}
  {% assign current = true %}
{% endif %}

{% if current %}
  {% assign item_class = item_class | append: ' active' %}
{% endif %}

{% if forloop.last %}
  {% assign item_class = item_class | append: ' last' %}
{% endif %}

{% if current %}
  {% assign item_class = item_class | append: ' active' %}
{% endif %}

{% if current == {{collection.title}} %}
  {% assign item_class = item_class | append: ' active' %}
{% endif %}
